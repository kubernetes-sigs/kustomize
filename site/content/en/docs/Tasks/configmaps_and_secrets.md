---
title: "ConfigMaps and Secrets"
linkTitle: "ConfigMaps and Secrets"
weight: 1
date: 2017-01-05
description: >
  Storing Key-Value Pairs and Confidential Data on Clusters
---

{{< alert color="success" title="TL;DR" >}}
- Generate ConfigMaps from files and literals with `configMapGenerator`
- Generate Secrets from files and literals with `secretGenerator`
- Rollout ConfigMap and Secret changes to workloads
{{< /alert >}}

## Motivation
Use a ConfigMap or Secret for setting configuration data separately from application code. ConfigMap and Secret values typically reside outside of the Kubernetes manifest; such as a `.properties` file.

ConfigMaps and Secrets require rollouts to be performed in order for the changes to be applied to the Pods consuming them.

Apply offers native support for generating both Secrets and ConfigMaps from other sources such as files and literals.

## Working with Generators
Secret and ConfigMap Resources can be generated by adding a `configMapGenerator` or `secretGenerator` entry to the `kustomization.yaml` file.

The generated Resource name will include a suffix that changes when the resource data changes. See the Rollouts section for more detail about this feature.

{{< alert color="success" title="Command and Examples" >}}
See the [Reference](/docs/reference/) section for the [configMapGenerator](/docs/reference/api/kustomization-file/configmapgenerator/) and [secretGenerator](/docs/reference/api/kustomization-file/secretgenerator/) commands and examples.
{{< /alert >}}


## Rollouts
There are four different ways that you can use a ConfigMap to configure a container inside a Pod:

1. Inside a container command and args
2. Environment variables for a container
3. Add a file in read-only volume, for the application to read
4. Write code to run inside the Pod that uses the Kubernetes API to read a ConfigMap

It is important to note that rollout behavior depends on how the workload consumes the ConfigMap.
- ConfigMaps mounted in a volume are updated automatically.
- ConfigMaps consumed as environment variables are not updated automatically and require a pod restart.

Typically users want to perform a rolling update of the ConfigMap changes to Pods as soon as the ConfigMap changes are pushed.

Apply facilitates rolling updates for ConfigMaps by creating a new ConfigMap for each change to the data. Workloads (e.g. Deployments, StatefulSets, etc) are updated to point to a new ConfigMap instead of the old one. This allows the change to be gradually rolled the same way other Pod Template changes are rolled out.

Each generated Resources name has a suffix appended by hashing the contents. This approach ensures a new ConfigMap is generated each time the contents is modified.

{{< alert color="warning" title="Note" >}}
The Resource names will contain a suffix and will not match the exact name that is specified in the `kustomization.yaml` file. Consider this difference when looking for the Resource with `kubectl get`.
{{< /alert >}}
